{"version":3,"sources":["app.coffee","templates.coffee","marker_model.coffee","marker_view.coffee","markers_model.coffee","markers_view.coffee","map_menu_model.coffee","map_menu_view.coffee","add_marker_menu_model.coffee","add_marker_menu_view.coffee","add_type_menu_model.coffee","add_type_menu_view.coffee","context_menu_model.coffee","context_menu_view.coffee","popup_model.coffee","popup_view.coffee","map_model.coffee","map_view.coffee","wikilocals_model.coffee","wikilocals_view.coffee","init_app.coffee"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["window.App =\n  Models : { }\n  Collections : { }\n  Views : { }\n  Templates : { }\n  globalPath : { }","App.Templates.mapTpl =\n  \"\"\"\n  <div class=\"map\" id=\"js-map\"></div>\n  \"\"\"\n\nApp.Templates.mapTypesTpl =\n  \"\"\"\n  <ul class=\"map-menu-list\">\n    <li class='check-menu-buttons'>\n      <button type=\"button\" id=\"js-set-all-btn\" class=\"btn btn-xs btn-primary\">\n        Check All <span class=\"glyphicon glyphicon-check\" aria-hidden=\"true\"></span>\n      </button>\n      <button type=\"button\" id=\"js-unset-all-btn\" class=\"btn btn-xs btn-primary\">\n        Uncheck <span class=\"glyphicon glyphicon-unchecked\" aria-hidden=\"true\"></span>\n      </button>\n    </li>\n    <li class='map-menu-buttons'>\n      <button type=\"button\" class=\"btn btn-primary add-btn\">Add</button>\n      <button type=\"button\" class=\"btn btn-primary draw-btn\">Show</button>\n      <button type=\"button\" class=\"btn btn-default cancel-btn\">Cancel</button>\n    </li>\n    <li class='add-new-type-button'>\n      <button type=\"button\" class=\"btn btn-primary add-new-type-btn\">\n        Type <span class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span>\n      </button>\n    </li>\n  </ul>\n  <div class=\"show-btn\" id=\"js-show-menu\"></div>\n  \"\"\"\n\nApp.Templates.mapTypesItemTpl =\n  \"\"\"\n  <li class=\"map-menu-item\" data-type=\"<%= type_id %>\">\n    <span class='part-icon <%= type %>'></span>\n    <span class='type'><%= type %></span>\n    <span class=\"badge\"><%= count %></span>\n  </li>\n  \"\"\"\n\nApp.Templates.mapAddAlertTpl =\n  \"\"\"\n  <div id=\"js-marker-alert\" class=\"alert add-marker-alert alert-info\" role=\"alert\">\n    <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n    Please, click on map to add a new marker.\n  </div>\n  \"\"\"\n\nApp.Templates.addTpl =\n  \"\";\n\nApp.Templates.popupTpl =\n  \"\"\"\n  <div class=\"header\">\n    <span>\n      <%= title %>\n    </span>\n    <button type=\"button\" class=\"close\">&times;</button>\n  </div>\n  <div>\n    <%= description %>\n  </div>\n  \"\"\"\n\nApp.Templates.contextMenuTpl =\n  \"\"\"\n  <ul>\n    <li class=\"edit\">Edit</li>\n    <li class=\"delete\">Delete</li>\n  </ul>\n  \"\"\"","class App.Models.MarkerModel extends Backbone.Model\n  defaults:\n    active: true\n    debug: false\n    enableDrag: false\n    parent: null\n    view: null\n    type: null\n    type_id: null\n    px_offset_x: 16\n    px_offset_y: 46\n    markerTop: null\n    markerLeft: null\n    projection: null\n    lat: null\n    lng: null\n\n  initialize: (options) ->\n    @options = options or null\n    @on 'add_to_collection', @insertIntoCollection\n\n    @on \"change:type\", () ->\n      return\n\n    @set 'parent', @collection.parent if @collection\n    \n    if (not @options.preview)\n      do @updateModel\n\n    @set {\n      types : @options.type\n      px_offset_x: if _.isNull @options.px_offset_x then @options.type[0].px_offset_x else @get 'px_offset_x'\n      px_offset_y: if _.isNull @options.px_offset_y then @options.type[0].px_offset_y else @get 'px_offset_y'\n    }, {\n      silent: true\n    }\n\n    return\n\n  removeFromCollection: ->\n    @collection.remove @\n\n    return\n\n  insertIntoCollection: ->\n    @collection.add @\n\n    return\n\n  updateModel: ->\n    category = do @get('parent').getActiveCategory\n    trigger = () =>\n      @trigger 'showCustomType', @\n\n    if category\n      _.each @options.type, (el, key) =>\n        for active, index in category\n          if el.id == parseInt active\n            @set\n              type : el.type\n              type_id : el.id,\n                silent: true#:TODO: refactor silent options like this\n\n            _.defer trigger\n\n    else\n      @set\n        type : @options.type[0].type\n        type_id : @options.type[0].id,\n          silent: true\n\n    return\n\n  updateMarkerDynamickCoords: ->\n    containerPixels = @get('projection').fromLatLngToContainerPixel(new google.maps.LatLng(\n      @get('lat'),\n      @get('lng')\n    )) or null;\n\n    @set\n      markerTop : containerPixels.y\n      markerLeft : containerPixels.x, {silent: true}\n\n    return\n\n  createPopup: ->\n    parent = @get('parent')\n\n    parent.set 'popupModel', new App.Models.PopupModel({parent: @get('parent'), marker: @})\n    parent.set 'popupView', new App.Views.PopupView({model: @get('parent').get('popupModel')})\n\n    return\n\n  createContext: ->\n    parent = @get('parent')\n\n    parent.set 'contextModel', new App.Models.ContextMenuModel({parent: @get('parent'), marker: @})\n    parent.set 'contextView', new App.Views.ContextMenuView({model: @get('parent').get('contextModel')})\n\n    return\n","class App.Views.MarkerView extends Backbone.View\n\n  tagName: 'div'\n\n  attributes: () ->\n    class : 'marker' + unless _.isNull(@.model.get('type')) then ' ' + @model.get('type') else ''\n\n  events:\n    \"click\": \"openPopup\",\n    \"contextmenu\": \"openContext\"\n\n  initialize: (options) ->\n    @options = options or null\n    @parent = @model.get 'parent'\n\n    return\n\n  render: (options) ->\n    marker = new google.maps.Marker\n      position: new google.maps.LatLng(@model.get('lat'), @model.get('lng')),\n      visible: if @model.get('debug') then true else false,#TODO: move options.preview to model properties\n      map: options.map.get 'map'\n      draggable: true#TODO: add dragable property for OverlayView object\n\n    if @model.get('type') and @model.get('debug') isnt true\n      @createMarker marker, {\n        container: @$el\n        offsetX: @model.get 'px_offset_x'#TODO: refactor property px_offset_x name\n        offsetY: @model.get 'px_offset_y'#TODO: refactor property px_offset_x name\n        title: @model.get('type') or null\n        map: options.map.get('map') or null\n      }\n    else\n      marker.visible = true\n      @label = marker\n\n    return @\n\n  createMarker: (marker, params) ->\n    scope = @\n    _params = params ? null\n    _marker = marker ? null\n\n    label = (options) ->\n      @setValues options\n      @marker = _params.container.html('')\n\n      return\n\n    label.prototype = new google.maps.OverlayView();\n\n    label.prototype.onAdd = ->\n      pane = @getPanes().overlayMouseTarget\n      @marker.draggable=true;\n\n      $(pane).append(@marker);\n\n      google.maps.event.addDomListener _params.map.getDiv(), 'mouseleave', () =>\n        google.maps.event.trigger @marker[0], 'mouseup' if scope.model.get 'enableDrag'\n\n      google.maps.event.addDomListener @marker[0], 'mousedown', (e) =>\n        if scope.model.get 'enableDrag'\n          @marker[0].style.cursor = 'move'\n          _params.map.set 'draggable', false\n          @.set 'origin', e\n\n          @moveHandler = google.maps.event.addDomListener _params.map.getDiv(), 'mousemove', (e) =>\n            origin = @.get 'origin'\n            left = origin.clientX-e.clientX\n            top = origin.clientY-e.clientY\n            divPixel = @.getProjection().fromLatLngToDivPixel @.get 'position'\n            latLng = @.getProjection().fromDivPixelToLatLng new google.maps.Point divPixel.x-left, divPixel.y-top\n            @.set 'origin', e\n            @.set 'position', latLng\n            do @.draw\n\n      google.maps.event.addDomListener @marker[0], 'mouseup', () =>\n        if scope.model.get 'enableDrag'\n          @marker[0].style.cursor = 'pointer';\n          _params.map.set 'draggable', true\n          google.maps.event.removeListener @.moveHandler#TODO: refactor like this add/remove \"marker add\" handler operations\n\n      return\n\n    label.prototype.onRemove = =>\n      @$el.remove();\n\n    label.prototype.getDraggable = -> false\n\n    label.prototype.getPosition = -> @get 'position'\n\n    label.prototype.draw = ->\n      divPixel = @getProjection().fromLatLngToDivPixel @get 'position'\n      styles =\n        left: Math.round(divPixel.x - _params.offsetX) + 'px'\n        top: Math.round(divPixel.y - _params.offsetY) + 'px'\n\n      scope.model.set\n        'projection': @getProjection(), {silent: true}\n\n      @marker.css styles\n\n      if scope.model.get 'enableDrag'\n        scope.model.set\n          'lat' : @.get('position').G\n          'lng' : @.get('position').K\n\n      return\n\n    @label = new label\n      map: _params.map\n\n    @label.bindTo 'position', _marker, 'position'\n    @label.bindTo 'visible', _marker, 'visible'\n\n    return\n\n  openPopup: (e) ->\n    e.stopPropagation()\n    if e.preventDefault then e.preventDefault() else (e.returnValue = false)\n\n    unless @model.get('enableDrag')\n      unless @parent is null\n        do @parent.removePopupIfExists\n        do @parent.removeContextIfExists\n        do @model.updateMarkerDynamickCoords\n        do @model.createPopup\n\n        popup = @model.get('parent').getPopup()\n        $('#js-map').append popup.view.render().$el\n\n        config = popup.view.getWindowPositionFromMarker()\n\n        unless popup.model.get 'mobile'\n          popup.view.setWindowPosition config\n          popup.view.$el.addClass config.arrow_direction + '_direction'\n          ruleTag = popup.view.getArrowPosition config\n          $('#js-arrow-correction-rule').remove() if ruleTag\n          $('head').append ruleTag\n\n    return\n\n  openContext: (e) ->\n    e.stopPropagation()\n    if e.preventDefault then e.preventDefault() else (e.returnValue = false)\n\n    unless @model.get 'enableDrag'\n      do @parent.removePopupIfExists\n      do @parent.removeContextIfExists\n      do @model.updateMarkerDynamickCoords\n      do @model.createContext\n\n      context = @model.get('parent').getContext()\n      $('#js-map').append context.view.render().$el\n\n      config = context.view.getContextPositionFromMarker()\n      context.view.setContextPosition config\n\n    return","class App.Collections.MarkerCollection extends Backbone.Collection\n  model: App.Models.MarkerModel","class App.Views.MarkerCollectionView extends Backbone.View\n\n  initialize: (options) ->\n    @options = options or null;\n    @map_model = @options.collection.parent.get 'mapModel'\n    @setElement '.map-container'\n    @parent = @options.collection.parent\n\n    @listenTo @collection, \"add\", @render\n    @listenTo @collection, \"change\", @update\n    @listenTo @collection, \"remove\", @remove\n    @listenTo @collection, \"showCustomType\", @updateCustomClass\n    @listenTo @collection, \"redrawChangedLatLng\", (args) ->\n      @remove args\n      @render args\n      return\n\n    return\n\n  updateCustomClass: (args) ->\n    unless args.get('view').$el.hasClass args.get 'type'\n      args.get('view').$el.removeAttr 'class'\n      args.get('view').$el.addClass \"marker #{args.get('type')}\"\n\n    return\n\n  hideNonSelectedCategories: () ->\n    activeArr = do @parent.getActiveCategory\n    availCount = 0\n    hide = []\n    show = []\n\n    _.each @parent.get('categories').avail, (el) =>\n      availCount += el.count\n\n    if @collection.models.length is (availCount - 1)#TODO: refactor -1\n      for active, index in activeArr\n        @collection.each (el, key) =>\n          for typeObj, index in el.get 'types'\n            if typeObj.id isnt parseInt active\n              hide.push el if _.indexOf(hide, el) is -1 and _.indexOf(show, el) is -1\n            else\n              show.push el if _.indexOf(show, el) is -1\n              if _.indexOf(hide, el) isnt -1\n                hide = _.without(hide, el);\n\n          return\n    else\n      do @parent.updateMarkersCollection\n\n    do @showAll\n    _.each hide, (el) =>\n      @remove el\n\n    return\n\n  showAll: () ->\n    availCount = 0\n\n    if @collection.models.length is availCount - 1\n      _.each @collection.models, (el) =>\n        unless el.get('active')\n          @render el\n          el.set active: true, {silent: true}\n    else\n      do @parent.updateMarkersCollection\n\n    return\n\n  renderCollection: ->\n    collection = @options.collection.clone()\n\n    collection.each (el, key) =>\n      markerView = new App.Views.MarkerView { model: el }\n      markerView.render {map: @map_model}\n\n      el.set view: markerView, {silent: true}\n\n      if collection.length - 1 is key\n        @options.collection.parent.trigger('collection_render');\n\n    return\n\n  remove: (args) ->\n    cluster =  @parent.get 'cluster'\n    cluster.removeMarker args.get('view').label if cluster isnt null\n    args.get('view').label.setMap null\n    do args.get('view').remove\n    args.set active: false, {silent: true}\n\n    return\n\n  render: (args) ->\n    markerView = new App.Views.MarkerView { model: args }\n    cluster = @parent.get 'cluster'\n    markerView.render {map: @map_model}\n    args.set view: markerView, {silent: true}\n    cluster.addMarker args.get('view').label if cluster isnt null\n\n    return\n\n  update: (args) ->\n    if args.hasChanged('type')\n      if args.get('preview')\n        @remove args\n        @render args\n      else\n        do args.updateModel\n    else\n      #..\n\n    return","class App.Models.MapMenuModel extends Backbone.Model\n  defaults:\n    activeCategory: null\n    parent: null\n    collection: null\n    fetchCategoryRoute: ''\n\n  initialize: (options) ->\n    @options = options ? null\n\n    @on 'change:activeCategory', () ->\n      @get('parent').set\n        'activeCategory': @get 'activeCategory'\n    @\n\n  fetchCollectionByCategory: () ->\n    collection = @get 'collection'\n    collection.url = @get('parent').get('location') + @get 'fetchCategoryRoute'\n\n    collection.fetch\n      success: (collection, response, options) =>\n        return\n      error: (collection, response, options) ->\n        console.error response\n\n        return\n\n    return","class App.Views.MapMenuView extends Backbone.View\n  tagName: 'div'\n  className: 'map-menu'\n  menuActive: false\n  btnSize: 64\n  animation: 300\n\n  events:\n    \"click #js-set-all-btn\": \"setAll\"\n    \"click #js-unset-all-btn\": \"unsetAll\"\n    \"click .map-menu-item\": \"setCategory\"\n    \"mouseover .map-menu-item\": \"showAllMenu\"\n    \"click .add-btn\": \"addMarkerAction\"\n    \"click .add-new-type-btn\": \"addNewTypeAction\"\n    \"click .draw-btn\": \"drawMarkersAction\"\n    \"click .cancel-btn\": \"cancelMenu\"\n    #\"click .show-btn\": \"showMenu\"\n    \"mouseover\": \"showPartMenu\"\n    \"click .show-btn\": \"showPartMenu\"\n    #\"mouseout .map-menu-list\": \"hideMenu\"\n    #\"mouseout\": \"hideMenu\"\n\n  initialize: (options) ->\n    @options = options ? null\n    @parent = @model.get 'parent'\n    @template = _.template App.Templates.mapTypesTpl\n\n    return\n\n  render: () ->\n    json = do @model.toJSON\n    @el.innerHTML = @template json\n\n    return @\n\n  setAll: () ->\n    @.$('.map-menu-item').addClass 'active'\n\n  unsetAll: () ->\n    @.$('.map-menu-item').removeClass 'active'\n\n  showAllMenu: () ->\n    btn = @$('#js-show-menu')\n    menu = @$('.map-menu-list')\n\n    @.$el\n      .stop()\n      .animate {width: 200}, @animation, \"linear\", () =>\n        _.defer () =>\n          if @.$el.hasClass 'show-part'\n            @.$el.removeClass 'show-part'\n\n          @.$el.addClass 'show-all'\n          @.$('.btn').removeClass 'btn-sm'\n\n          return\n\n    return\n\n  showPartMenu: (e) ->\n    btn = @$('#js-show-menu')\n    menu = @$('.map-menu-list')\n    \n    if e.type is 'click' and @menuActive\n      do @hideMenu\n      return\n\n    unless @menuActive\n      @.$el.addClass 'show-part'\n      @.$('.btn').addClass 'btn-sm'\n\n      btn\n        .stop()\n        .animate {right: 0}, @animation, \"linear\", () =>\n          btn.addClass 'active'\n      @.$el.stop().animate {right: 0}, @animation, \"linear\", () =>\n        @menuActive = true\n\n    return\n\n  hideMenu: () ->\n    btn = @$('#js-show-menu')\n    menu = @$('.map-menu-list')\n\n    if @.$el.hasClass 'show-all' then right = @.$el.css 'width' else right = @btnSize\n    @.$el\n      .stop()\n      .animate {right: -(parseInt right)}, @animation, \"linear\", () =>\n        @.$el.removeClass 'show-part'\n        @.$el.removeClass 'show-all'\n        @.$el.css 'width', ''\n        @menuActive = false\n\n    btn\n      .stop()\n      .animate {right: right}, @animation, \"linear\", () =>\n        btn.removeClass 'active'\n\n    return\n\n  renderMenuItems: () ->\n    collection = @model.get 'collection'\n    categories = @parent.get('categories').avail\n\n    @menu_item_template = _.template App.Templates.mapTypesItemTpl\n\n    for own prop of categories when categories[prop]\n      params =\n        type: prop,\n        type_id: categories[prop].type_id,\n        count: categories[prop].count\n\n      $(@menu_item_template params).insertBefore @$ '.map-menu-list .map-menu-buttons'\n\n    if @parent.get 'activeCategory'\n      activeTypes = @parent.get('activeCategory').split('=')[1].split(',')\n\n      _.each activeTypes, (el) =>\n        @$(\"li[data-type='\" + el + \"']\").addClass 'active';\n\n    return @\n\n  unrenderMenuItems: () ->\n    @$(\".map-menu-list .map-menu-item\").remove();\n\n  setCategory: (e) ->\n    routeParams = {}#TODO: refactor initialization of this variable\n    search = /([^&=]+)=?([^&]*)/g\n    decode = (s) ->\n      decodeURIComponent s.replace /\\+/g, \" \"\n    type = $(e.currentTarget).data 'type'\n\n    if e.preventDefault then e.preventDefault() else (e.returnValue = false)\n\n    do @parent.removePopupIfExists\n    do @parent.removeContextIfExists\n    do @parent.get('addMarkerMenuView').hideForm\n\n    category = @model.get('fetchCategoryRoute').substr 9\n\n    while match = search.exec(category) then routeParams[decode match[1]] = decode match[2]\n\n    unless $(e.currentTarget).hasClass('active')\n      $(e.currentTarget).addClass 'active'\n\n      if @model.get('fetchCategoryRoute').length > 0 and routeParams.type\n        type = type + ',' + routeParams.type\n\n      @model.set\n        'fetchCategoryRoute': \"/markers/type=#{type}&#{@parent.get 'area'}\",\n        'activeCategory': \"type=#{type}\"\n    else\n      $(e.currentTarget).removeClass 'active'\n\n      typesParamArr = routeParams.type.split ','\n      removeIndex = typesParamArr.indexOf(do type.toString);\n      typesParamArr.splice removeIndex, 1\n\n      if typesParamArr.length > 0\n        @model.set\n          'fetchCategoryRoute': \"/markers/type=#{typesParamArr.join(',')}&#{@parent.get 'area'}\",\n          'activeCategory': \"type=#{typesParamArr.join(',')}\"\n      else\n        @model.set\n          'fetchCategoryRoute': \"/markers/#{@parent.get 'area'}\",\n          'activeCategory': null\n\n    return @\n\n  addMarkerAction: (e) ->\n    delay = 1500\n    mapModel = @parent.get 'mapModel'\n    addMenu = @parent.get 'addMarkerMenuView'\n\n    if e.preventDefault then e.preventDefault() else (e.returnValue = false)\n\n    unless $(e.currentTarget).hasClass 'active'\n      $(e.currentTarget).addClass 'active'\n\n      addMarkerId = do @addMarkerAlert\n      _.delay(@removeMarkerAlert, delay, addMarkerId);\n\n      google.maps.event.addListener mapModel.get('map'), 'click', (event) =>\n        attrs =\n          preview: true,\n          lat: do event.latLng.lat\n          lng: do event.latLng.lng\n\n        if addMarkerId then @removeMarkerAlert(addMarkerId)\n        do @hideMenu\n\n        addMenu.addPreview(attrs)\n        addMenu.setLatLng(attrs)\n        do addMenu.show_form\n\n        return\n    else\n      do addMenu.hideForm\n\n    return\n\n  drawMarkersAction: () ->#TODO: prevent markers redraw if url hasn't changed\n    do @parent.get('markerCollectionView').hideNonSelectedCategories\n\n    return\n\n  addNewTypeAction: () ->\n    do @parent.get('addTypeMenuView').show\n\n    return\n\n  cancelMenu: () ->#TODO: store prev settings and roll back to them, on press cancel by user\n    @model.set\n      'fetchCategoryRoute': \"/markers/#{@parent.get 'area'}\"\n      'activeCategory': null\n\n    $('.map-menu-item').removeClass 'active'\n    do @unsetAll\n    do @hideMenu\n    do @parent.get('markerCollectionView').showAll\n\n    return\n\n  addMarkerAlert: () ->\n    $('#js-map').append $(App.Templates.mapAddAlertTpl)[0]\n\n    return $(App.Templates.mapAddAlertTpl).attr 'id'\n\n\n  removeMarkerAlert: (id) ->\n    do $(\"##{id}\").remove","class App.Models.AddMarkerMenuModel extends Backbone.Model\n  defaults:\n    mobile: null\n    parent: null\n    tmp_model: null\n    action: null\n\n  initialize: (options) ->\n    md = new MobileDetect(window.navigator.userAgent);\n    @options = options ? null\n\n    @set 'mobile', do md.mobile#TODO: move to main app model\n\n    return","class App.Views.AddMarkerMenuView extends Backbone.View\n  events:\n    \"click .btn\": \"validateForm\",\n    \"click .close\": \"hideForm\",\n    \"input.check_errors select[name='type[]']\": \"check_error_class\",\n    \"input.update_preview select[name='type[]']\": \"updatePreviewType\",\n    \"input input[name='title']\": \"check_error_class\",\n    \"input textarea[name='description']\": \"check_error_class\",\n    \"input input[name='lat']\": \"check_error_class\",\n    \"input input[name='lng']\": \"check_error_class\"\n\n  tmp_model: null#TODO: move property to model\n\n  initialize: (options) ->\n    @options = options ? null\n\n    @listenTo @model, \"start_watch_lat_lng_change\", @watchLatLngChange\n\n    if @model.get 'mobile'\n      @$el.addClass 'mobile'\n\n    _.each @model.get('parent').get('categories').all, (el) =>\n      @$('#type').append $(\"<option></option>\").attr(\"value\", el.id).text(el.type)\n\n    return\n\n  checkType: (attrs) ->\n    categories = @model.get('parent').get('categories').all\n\n    for own prop of categories when categories[prop].id is parseInt attrs.val\n      type = categories[prop].type\n      break\n\n    return type\n\n  addPreview: (attrs) ->\n    collection = @model.get('parent').get 'markerCollection'\n    select = @$ 'select[name=\\'type[]\\']'\n\n    if do select.val isnt ''\n      attrs.type = @checkType {val: do select.val}\n\n    tmp_model = new App.Models.MarkerModel(attrs)\n    tmp_model.collection = collection;\n    tmp_model.trigger 'add_to_collection'\n\n    if @tmp_model then do @tmp_model.removeFromCollection\n    @tmp_model = tmp_model\n\n    return\n\n  updatePreviewType: () ->\n    select = @$ 'select[name=\\'type[]\\']'\n    type = @checkType {val: select.val()} if do select.val isnt ''\n\n    if _.isNull @model.get 'action'\n      @tmp_model.set 'type', type\n    else\n      @model.get('parent').get('activeEditMarker').set 'type', type,\n        silent: true\n      @model.get('parent').get('activeEditMarker').trigger 'showCustomType', @model.get('parent').get 'activeEditMarker'\n\n    return\n\n  setFields: (marker) ->\n    if marker.get 'title' then @$('#title').val marker.get 'title'\n    if marker.get 'description' then @$('#description').val marker.get 'description'\n\n    return\n\n  setType: (marker) ->\n    types = []\n\n    _.each marker.get('types'), (el) =>\n      types.push el.id\n\n    @$(\"#type\").val(types);\n\n    return\n\n  setLatLng: (attrs) ->\n    lat_input = @$ 'input[name=\\'lat\\']'\n    lng_input = @$ 'input[name=\\'lng\\']'\n    lat_input.val attrs.lat\n    lat_input.trigger \"input\"\n    lng_input.val attrs.lng\n    lng_input.trigger \"input\"\n\n    return\n\n  check_error_class: (e) ->\n    if $(e.target).parent().hasClass 'has-error' then $(e.target).parent().removeClass 'has-error'\n\n    return\n\n  show_form: () ->    \n    @$el.show \"slow\", () =>\n      @model.get('parent').set\n        'preventFetch': true\n\n    return\n\n  switchEditAction: () ->\n    actionArr = @.$el.attr('action').split '/'\n\n    if actionArr[actionArr.length - 1] is 'markers'\n      actionArr.push 'edit'\n\n      @.$el.attr 'action', actionArr.join '/'\n    else\n      do actionArr.pop\n      @.$el.attr 'action', actionArr.join '/'\n\n\n    return\n\n  hideForm: () ->\n    select = @$ 'select[name=\\'type[]\\']'\n    lat = @$ 'input[name=\\'lat\\']'\n    lng = @$ 'input[name=\\'lng\\']'\n    addMarkerAlert = $ '.add-marker-alert'\n    addBtn = $ '.add-btn'\n    map = @model.get('parent').get('mapModel').get('map')\n\n    if addBtn.hasClass 'active' then addBtn.removeClass 'active'#TODO: refactor this to JQuery function\n    if addMarkerAlert then do addMarkerAlert.remove\n    if @tmp_model\n      do @tmp_model.removeFromCollection\n      @tmp_model = null\n\n    google.maps.event.clearListeners map, 'click'\n\n    if @model.get('parent').get('activeEditMarker')\n      @model.set 'action', null\n      @model.get('parent').get('activeEditMarker').set 'enableDrag', false\n      @model.get('parent').get('activeEditMarker').set 'lat', @model.get('parent').get 'cacheEditMarkerLat'\n      @model.get('parent').get('activeEditMarker').set 'lng', @model.get('parent').get 'cacheEditMarkerLng'\n      @model.get('parent').get('activeEditMarker').set 'type', @model.get('parent').get 'cacheEditMarkerType'\n      @model.get('parent').get('activeEditMarker').trigger 'redrawChangedLatLng', @model.get('parent').get 'activeEditMarker'\n      @model.get('parent').set 'cacheEditMarkerLat', null\n      @model.get('parent').set 'cacheEditMarkerLng', null\n      @model.get('parent').set 'cacheEditMarkerType', null\n      @model.get('parent').set 'activeEditMarker', null\n      do @.switchEditAction\n\n    @model.get('parent').get('mapView').addClickListener google.maps.event, map\n\n    @$el.hide \"slow\", () =>\n      @model.get('parent').set 'preventFetch', false\n      select.val ''\n      lng.val ''\n      lng.val ''\n\n      return\n\n    return\n\n  validateForm: (e) ->\n    select = @$ 'select[name=\\'type[]\\']'\n    lat = @$ 'input[name=\\'lat\\']'\n    lng = @$ 'input[name=\\'lng\\']'\n\n    unless select.val() isnt '' and lat.val() isnt '' and lng.val() isnt ''\n      e.stopPropagation()\n      if e.preventDefault then e.preventDefault() else (e.returnValue = false)\n\n      _.each e.delegateTarget, (el) ->\n        if $(el).val() is '' and $(el).attr('type') isnt 'hidden' and $(el).attr('type') isnt 'submit'\n          $(el).parent().addClass 'has-error'\n        else\n          #..\n\n        return\n    else\n      #..\n\n    return\n\n  watchLatLngChange: () ->\n    lat = @$ 'input[name=\\'lat\\']'\n    lng = @$ 'input[name=\\'lng\\']'\n    activeEditMarker = @model.get('parent').get 'activeEditMarker'\n\n    unless activeEditMarker is null\n      activeEditMarker.on \"change:lat\", () ->\n        lat.val activeEditMarker.get 'lat'\n\n      activeEditMarker.on \"change:lng\", () ->\n        lng.val activeEditMarker.get 'lng'\n\n    return","class App.Models.AddTypeMenuModel extends Backbone.Model\n  defaults:\n    parent: null\n\n  initialize: (options) ->\n    return","class App.Views.AddTypeMenuView extends Backbone.View\n  events:\n    \"click .close\": \"hideForm\",\n\n  initialize: (options) ->\n    @options = options ? null\n\n    return\n\n  show: ()->@$el.show \"slow\", () =>\n    @model.get('parent').set\n      'preventFetch': true\n\n    return\n\n  clearFields: ()->\n    type = @$ 'input[name=\\'type\\']'\n    image = @$ 'input[name=\\'image\\']'\n\n    console.log type\n\n    type.val ''\n    image.val ''\n    return\n\n  hideForm: ()->\n    @$el.hide \"slow\", () =>\n      do @clearFields\n      @model.get('parent').set\n        'preventFetch': false","class App.Models.ContextMenuModel extends Backbone.Model\n  defaults:\n    parent: null\n    marker: null\n\n  initialize: (options) ->\n    @options = options ? null\n\n    return","class App.Views.ContextMenuView extends Backbone.View\n  tagName: 'div'\n\n  attributes: () ->\n    attributes =\n      class: 'context'\n      id: 'js-context'\n\n  events:\n    \"click .edit\": \"editMarkerAction\"\n    \"click .delete\": \"deleteMarkerAction\"\n\n  initialize: (options) ->\n    @options = options ? null\n    @parent = @model.get 'parent'\n\n    return\n\n  unrender: () ->\n    do @$el.remove\n\n    @\n\n  render: () ->\n    json = do @model.toJSON\n\n    @template = _.template App.Templates.contextMenuTpl\n    @el.innerHTML = @template json\n\n    @\n\n  getContextPositionFromMarker: () ->#TODO: move method to main model, to prewent multiple declaration(also in popupWindow view)\n    canvas = $ '#js-map'\n    markerTop = @model.get('marker').get 'markerTop'\n    markerLeft = @model.get('marker').get 'markerLeft'\n    contextHeight = parseInt @$el.css 'height'\n    contextWidth = parseInt @$el.css 'width'\n    secondary_calculation = false\n    objectTop = markerTop - contextHeight / 2\n    objectLeft = if canvas[0].clientWidth / 2 >= markerLeft then markerLeft else markerLeft - contextWidth\n    offset =\n      x: 0,\n      y: 0\n    canvasTop = canvas[0].offsetHeight\n    canvasRight = parseInt canvas.css 'width'\n    percent_position = markerTop * 100 / canvasTop\n    fallout = 'none'\n\n    switch true\n      when percent_position >= 90\n        offset.x = 0\n        offset.y = -16\n        objectTop = markerTop - contextHeight\n        objectLeft = markerLeft - contextWidth / 2\n        secondary_calculation = true\n        arrowDirection = 'bottom'\n      when percent_position <= 15\n        offset.x = 0\n        offset.y = @model.get('marker').get('view').el.clientHeight - 6\n        objectTop = markerTop\n        objectLeft = markerLeft - contextWidth / 2\n        secondary_calculation = true;\n        arrowDirection = 'top'\n      else\n        if canvas[0].clientWidth / 2 >= markerLeft\n          offset.x = @model.get('marker').get('view').el.clientWidth / 2 + 12\n        else\n          offset.x = -@model.get('marker').get('view').el.clientWidth / 2 - 10\n\n        if (canvas[0].clientWidth / 2) >= markerLeft\n          arrowDirection = 'left'\n        else\n          arrowDirection = 'right'\n\n        objectTop = markerTop - 16\n\n        if objectTop <= 34\n          objectTop = canvasTop * 5 / 100 + 34\n        else if (objectTop + contextHeight) > canvasTop\n          objectTop = canvasTop - contextHeight\n        else\n          #..\n\n    if secondary_calculation\n      if (objectLeft + contextWidth) > canvasRight\n        objectLeft = canvasRight - contextWidth\n        fallout = 'right';\n      else if objectLeft < 1\n        objectLeft = 0\n        fallout = 'left'\n    else\n      #..\n\n    return {\n      offset: offset\n      canvas: canvas\n      fallout: fallout\n      top: Math.round(objectTop)\n      left: Math.round(objectLeft)\n      height: contextHeight\n      width: contextWidth\n      arrow_direction: arrowDirection\n    }\n\n  setContextPosition: (config) ->\n    context = $('#js-context')\n\n    context.css\n      'left': config.left + config.offset.x\n      'top': config.top + config.offset.y\n\n    return\n\n  editMarkerAction: () ->\n    attrs =\n      lat: @model.get('marker').get 'lat'\n      lng: @model.get('marker').get 'lng'\n\n    @parent.get('addMarkerMenuModel').set 'action', @parent.get('addMarkerMenuView').$el.attr 'action'\n    do @unrender\n    do @parent.get('addMarkerMenuView').show_form\n    @parent.get('addMarkerMenuView').setLatLng attrs\n    @parent.get('addMarkerMenuView').setFields @model.get 'marker'\n    @parent.get('addMarkerMenuView').setType @model.get 'marker'\n    @parent.set 'activeEditMarker', @model.get 'marker'\n    @model.get('marker').set 'enableDrag', true\n    do @parent.get('addMarkerMenuView').switchEditAction\n\n    unless @parent.get('addMarkerMenuView').$('input[name=\\'id\\']').length > 0\n      @parent.get('addMarkerMenuView').$el.prepend \"<input name='id' type='hidden' value=#{@model.get('marker').get('id')}>\"\n    else\n      @parent.get('addMarkerMenuView').$('input[name=\\'id\\']').val @model.get('marker').get 'id'\n\n    return\n\n  deleteMarkerAction: () ->\n    console.log 'deleteMarkerAction'\n\n    return\n","class App.Models.PopupModel extends Backbone.Model\n  defaults:\n    parent: null\n    marker: null\n    mobile: null\n    title: null\n    description: null\n    type: null\n\n  initialize: (options) ->\n    md = new MobileDetect(window.navigator.userAgent);\n    @options = options ? null\n\n    @set\n      'title': @get('marker').get 'title'\n      'description': @get('marker').get 'description'\n      'type': @get('marker').get 'type'\n      'mobile': do md.mobile\n\n    return","class App.Views.PopupView extends Backbone.View\n  tagName: 'div'\n\n  attributes: () ->\n    attributes =\n      class: (if @model.get 'mobile' then 'mobile ' else '') + 'popup ' + @model.get('marker').get 'type'\n      id: 'js-popup'\n\n  events:\n    \"click .close\": \"unrender\"\n\n  initialize: (options) ->\n    @options = options ? null\n    @options.mapModel = @model.get('parent').get 'mapModel'\n    @options.map = @options.mapModel.get 'map'\n\n    return\n\n  render: () ->\n    json = do @model.toJSON\n\n    @template = _.template App.Templates.popupTpl\n    @el.innerHTML = @template json\n\n    return @\n\n  unrender: () ->\n    do @$el.remove\n\n    return @\n\n  getWindowPositionFromMarker: () -> #TODO: move method to main model, to prewent multiple declaration(also in contextMenu view)\n    canvas = $ '#js-map'\n    markerTop = @model.get('marker').get 'markerTop'\n    markerLeft = @model.get('marker').get 'markerLeft'\n    contextHeight = parseInt @$el.css 'height'\n    contextWidth = parseInt @$el.css 'width'\n    secondary_calculation = false\n    objectTop = markerTop - contextHeight / 2\n    objectLeft = if canvas[0].clientWidth / 2 >= markerLeft then markerLeft else markerLeft - contextWidth\n    offset =\n      x: 0,\n      y: 0\n    canvasTop = canvas[0].offsetHeight\n    canvasRight = parseInt canvas.css 'width'\n    percent_position = markerTop * 100 / canvasTop\n    fallout = 'none'\n\n    switch true\n      when percent_position >= 90\n        offset.x = 0\n        offset.y = -30\n        objectTop = markerTop - contextHeight\n        objectLeft = markerLeft - contextWidth / 2\n        secondary_calculation = true\n        arrowDirection = 'bottom'\n      when percent_position <= 15\n        offset.x = 0\n        offset.y = @model.get('marker').get('view').el.clientHeight - 4\n        objectTop = markerTop\n        objectLeft = markerLeft - contextWidth / 2\n        secondary_calculation = true;\n        arrowDirection = 'top'\n      else\n        if canvas[0].clientWidth / 2 >= markerLeft\n          offset.x = @model.get('marker').get('view').el.clientWidth / 2 + 12\n        else\n          offset.x = -@model.get('marker').get('view').el.clientWidth / 2 - 10\n\n        if (canvas[0].clientWidth / 2) >= markerLeft\n          arrowDirection = 'left'\n        else\n          arrowDirection = 'right'\n\n        if objectTop <= 34\n          objectTop = canvasTop * 5 / 100 + 34\n        else if (objectTop + contextHeight) > canvasTop\n          objectTop = canvasTop - contextHeight\n        else\n          #..\n\n    if secondary_calculation\n      if (objectLeft + contextWidth) > canvasRight\n        objectLeft = canvasRight - contextWidth\n        fallout = 'right';\n      else if objectLeft < 1\n        objectLeft = 0\n        fallout = 'left'\n    else\n      #..\n\n    return {\n      offset: offset\n      canvas: canvas\n      fallout: fallout\n      top: Math.round(objectTop)\n      left: Math.round(objectLeft)\n      height: contextHeight\n      width: contextWidth\n      arrow_direction: arrowDirection\n    }\n\n  setWindowPosition: (config) ->\n    popup = $ '#js-popup'\n\n    unless @model.get 'mobile'\n      popup.css\n        'left': config.left + config.offset.x\n        'top': config.top + config.offset.y\n\n    return\n\n  getArrowPosition: (config) ->\n    popup = $ '#js-popup'\n    marker = @model.get 'marker'\n    markerY = marker.get 'markerTop'\n    markerX = marker.get 'markerLeft'\n    rule = $ '<style id=\"js-arrow-correction-rule\" type=\\'text/css\\'></style>'\n\n    if config.arrow_direction is 'left' or config.arrow_direction is 'right'\n      arrowPosition = 100 - ((config.height - Math.round(markerY - config.top)) * 100) / config.height\n      arrowPosition = 'top: ' + parseInt arrowPosition\n    else if config.arrow_direction is 'top' or config.arrow_direction is 'bottom'\n      arrowPosition = switch\n        when config.fallout is 'left' then 'left: ' + parseInt (markerX * 100) / config.width\n        when config.fallout is 'right' then 'left: ' + parseInt ((config.width - (config.canvas[0].clientWidth - markerX)) * 100) / config.width\n        else 'left: 50'\n    else\n        #..\n\n    rule.html(\"#js-popup:after, #js-popup:before{#{arrowPosition}%;}\");","class App.Models.MapModel extends Backbone.Model\n  defaults:\n    map: null\n    parent: null\n    dynamicLatLng: null\n    default_lat: 49.98081\n    default_lng: 36.25272\n    test_lat: 49.695173508416076\n    test_lng: 35.767364501953125\n\n  initialize: (options) ->\n    @options = options ? null\n\n    @on \"ready_to_init_map\", () ->\n      @trigger 'set_map_offset'\n      @trigger 'init_map'\n\n      return","class App.Views.MapView extends Backbone.View\n  tagName: 'div'\n  className: 'map-container'\n\n  initialize: (options) ->\n    @options = options ? null\n    @template = _.template App.Templates.mapTpl\n    @parent = @model.get 'parent'\n\n    @listenTo @model, \"set_map_offset\", @setMapOffset\n    @listenTo @model, \"init_map\", @init_map\n    @listenTo @model, \"draw_map_menu\", @draw_map_menu\n\n    return\n\n  render: () ->\n    json = do @model.toJSON\n    @el.innerHTML = @template json\n\n    return @\n\n  setMapOffset: () ->\n    navbar_height = parseFloat $('.navbar').css('height') ? 0\n\n    @$el.css\n      'padding-top': navbar_height\n      'margin-top': \"-#{navbar_height}\"\n\n    return\n\n  addClickListener: (e, map) ->\n    e.addListener map, 'click', () =>\n      do @parent.get('mapMenuView').hideMenu if @parent.get 'mapMenuView'\n      do @parent.removePopupIfExists\n      do @parent.removeContextIfExists\n\n      return\n\n    return\n\n  addIdleListeners: (e, map) ->\n    e.addListener map, 'idle', () =>\n      center = do map.getCenter\n      LatLng =\n        'lat': center.lat(),\n        'lng': center.lng()\n\n      @model.set\n        'dynamicLatLng': LatLng\n\n      do @parent.updateArea\n      do @parent.get('mapMenuView').hideMenu if @parent.get 'mapMenuView'\n      do @parent.removePopupIfExists\n      do @parent.removeContextIfExists\n\n      return\n\n    e.addListenerOnce map, 'idle', () =>\n      @parent.trigger 'map_ready'\n\n    return\n\n  addDragstartListeners: (e, map) ->\n    e.addListener map, 'dragstart', () =>\n      do @parent.get('mapMenuView').hideMenu if @parent.get 'mapMenuView'\n      do @parent.removePopupIfExists\n      do @parent.removeContextIfExists\n\n      return\n\n    return\n\n  addZoomChangedListeners: (e, map) ->\n    e.addListener map, 'zoom_changed', () =>\n      #..\n      return\n\n    return\n\n  init_map: () ->\n    e = google.maps.event\n\n    @model.set\n      'map': new google.maps.Map @$('#js-map')[0], {\n        disableDefaultUI: true\n        center:\n          lat: @model.get 'default_lat'\n          lng: @model.get 'default_lng'\n        disableDoubleClickZoom: true\n        zoom: 12\n      }\n\n    map = @model.get 'map'\n\n    @addClickListener e, map\n    @addIdleListeners e, map\n    @addDragstartListeners e, map\n    @addZoomChangedListeners e, map","class App.Models.WikiLocalsModel extends Backbone.Model\n  defaults:\n    area: null\n    activeCategory: null\n    activeEditMarker: null\n    addMarkerMenuModel: null\n    addMarkerMenuView: null\n    addTypeMenuModel: null\n    addTypeMenuView: null\n    categories: null\n    cacheEditMarkerLat: null\n    cacheEditMarkerLng: null\n    cluster: null\n    getCategories: null\n    googleMapMarkers: []\n    location: null#TODO: check is this steel need'ed for fix of non root axes to index page\n    mapMenuModel: null\n    mapMenuView: null\n    mapModel: null\n    mapView: null\n    markerCollection: null\n    markerCollectionView: null\n    popupModel: null\n    popupView: null\n    preventFetch: false\n    performQuerie: null\n    contextModel: null\n    contextView: null\n\n  initialize: (options) ->\n    @options = options ? null\n\n    trigger = () =>\n      @trigger 'draw_map_menu'\n\n      return\n\n    location = window.location.pathname.split '/'\n\n    do @initMap\n\n    @on \"change:area\", () ->\n      do @updateMarkersCollection unless @get 'preventFetch'\n\n    @on \"change:activeEditMarker\", () ->\n      @.get('addMarkerMenuModel').trigger 'start_watch_lat_lng_change'\n\n      unless @.get('activeEditMarker') is null\n        @.set 'cacheEditMarkerLat', @.get('activeEditMarker').get 'lat'\n        @.set 'cacheEditMarkerLng', @.get('activeEditMarker').get 'lng'\n        @.set 'cacheEditMarkerType', @.get('activeEditMarker').get 'type'\n\n    @on \"collection_render\", () ->\n      do @updateGMapMarkersArray\n      do @initMarkersClusterer\n\n    @on \"map_ready\", () ->\n      @set 'area': do @getArea\n      do @initMarkersCollection\n\n    @on \"map_ready\", () ->\n      do @initMapMenu\n      @getCategories (data) =>\n        @set 'categories': data\n        @set\n          'addMarkerMenuModel': new App.Models.AddMarkerMenuModel\n            parent: @\n        @set\n          'addMarkerMenuView': new App.Views.AddMarkerMenuView\n            el: '.add-marker'\n            model: @get 'addMarkerMenuModel'\n            map_model: @get 'mapModel'\n        @set\n          'addTypeMenuModel': new App.Models.AddTypeMenuModel\n            parent: @\n        @set\n          'addTypeMenuView': new App.Views.AddTypeMenuView\n            el: '.add-new-type'\n            model: @get 'addTypeMenuModel'\n            map_model: @get 'mapModel'\n\n        _.defer trigger\n\n        return\n\n    do location.pop\n    @set 'location': location.join('/')\n\n    return\n\n  getArea: () ->\n    map = @get('mapModel').get 'map'\n    bounds = do map.getBounds\n    center = do map.getCenter\n    northX = do bounds.getNorthEast().lng\n    northY = do bounds.getNorthEast().lat\n    southX = do bounds.getSouthWest().lng\n    southY = do bounds.getSouthWest().lat\n    offset = [northX - southX, northY - southY]\n    params =\n      'lngMin': parseFloat(center.K) - offset[0] / 2,\n      'lngMax': parseFloat(center.K) + offset[0] / 2,\n      'latMin': parseFloat(center.G) - offset[1] / 2,\n      'latMax': parseFloat(center.G) + offset[1] / 2\n\n    \"lng_min=#{encodeURIComponent(params.lngMin)}&lat_min=#{encodeURIComponent(params.latMin)}\n    &lng_max=#{encodeURIComponent(params.lngMax)}&lat_max=#{encodeURIComponent(params.latMax)}\";\n\n  getActiveCategory: () ->\n    if @get 'activeCategory'\n      category = @get('activeCategory').split '='\n      do category.shift\n      if category[0].split(',').length is 1\n        category\n      else\n        category[0].split(',')\n    else\n      false\n\n  updateArea: () ->\n    area = do @getArea\n    trigger = () =>\n      @trigger 'menu_ready'\n\n      return\n\n    @set 'area': area\n\n    unless _.isNull @get 'markerCollection'#need to understand is it's a map initialization step, or drag map center\n      @getCategories (data) =>\n        @set 'categories': data\n        _.defer trigger\n\n        return\n\n    return\n\n  getPopup: () ->\n      model: @get 'popupModel'#TODO: refactor like this every returned literal object\n      view: @get 'popupView'\n\n  getContext: () ->\n    model: @get 'contextModel'\n    view: @get 'contextView'\n\n  removePopupIfExists: () ->\n    popup = do @getPopup\n\n    unless _.isNull(popup.view)\n      unless popup.model.get 'mobile' then do @get('popupView').unrender\n\n    return\n\n  removeContextIfExists: () ->\n    context = do @getContext\n\n    unless _.isNull context.view\n      do @get('contextView').unrender\n\n    return\n\n  initMapMenu: () ->\n    collection = @get 'markerCollection'\n\n    @set\n      'mapMenuModel': new App.Models.MapMenuModel\n        parent: @\n        collection: collection\n    @set\n      'mapMenuView': new App.Views.MapMenuView\n        model: @get 'mapMenuModel'\n\n    return\n\n  getCategories: (callback) ->\n    location = \"#{@get 'location'}/markers/categories/\"\n\n    @set 'getCategories', $.ajax\n      type: 'GET'\n      url: location + @get 'area'\n      dataType: 'json'\n\n    @get 'getCategories'\n      .done (data) ->\n        callback data\n      .fail (jqXHR, textStatus) ->\n        console.warn textStatus\n\n    return\n\n  initMap: () ->\n    trigger = () =>\n      @trigger 'map_ready_to_render'\n\n    @set\n      'mapModel': new App.Models.MapModel\n        parent: @\n    @set\n      'mapView': new App.Views.MapView\n        model: @get 'mapModel'\n\n    _.defer trigger\n\n    return\n\n  initMarkersCollection: () ->\n    location = @get 'location'\n    trigger = () =>\n      @trigger 'collection_ready'\n\n    @set\n      'markerCollection': new App.Collections.MarkerCollection()\n\n    @get('markerCollection').url = location + '/markers/' + @get 'area'\n    @get('markerCollection').parent = @\n\n    @get('markerCollection').fetch\n      reset: true\n      success: (collection, response, options) =>\n        @set\n          'markerCollectionView': new App.Views.MarkerCollectionView\n            collection: collection\n\n        _.defer trigger\n\n      error: (collection, response, options) ->\n        console.error response\n\n\n    return\n\n  updateMarkersCollection: () ->\n    location = \"#{@get 'location'}/markers/\"\n\n    unless _.isNull(@get 'activeCategory')\n      location += \"#{@get 'activeCategory'}&\"\n\n    unless _.isNull(@get 'markerCollection')\n      @get('markerCollection').url = location + @get 'area'\n\n      if _.isNull(@get 'performQuerie')\n        @set 'performQuerie', @get('markerCollection').fetch\n          reset: false\n          success: (collection, response, options) =>\n            @set 'performQuerie', null\n          error: (collection, response, options) =>\n            console.error response\n            @set 'performQuerie', null\n      else\n        #..\n\n    return\n\n  updateGMapMarkersArray: () ->\n    collection = @get 'markerCollection'\n    markersArray = @get 'googleMapMarkers'\n\n    markersArray.length = 0;\n\n    collection.each (el, key) =>\n      markersArray.push el.get('view').label\n\n  initMarkersClusterer: () ->\n    cluster = new MarkerClusterer @get('mapModel').get('map'), @get 'googleMapMarkers'\n    @set 'cluster', cluster","class App.Views.WikiLocalsView extends Backbone.View\n  events:\n    \"click #js-add-btn\": \"addMarkerAction\"\n\n  initialize: (options) ->\n    @options = options ? null\n\n    @listenTo @model, \"map_ready_to_render\", @drawMap\n    @listenTo @model, \"draw_map_menu\", @drawMapMenu\n    @listenTo @model, \"menu_ready\", @drawMenuItems\n    @listenTo @model, \"collection_ready\", @drawCollection\n\n    return @\n\n  render: () ->\n\n    return @\n\n  drawMap: () ->\n    map_model = @model.get 'mapModel'\n    map_view = @model.get 'mapView'\n\n    @$el.append map_view.render().el\n    map_model.trigger 'set_map_offset'\n    map_model.trigger 'init_map'\n\n    return @\n\n  drawMapMenu: () ->\n    map_menu_node = @model.get('mapMenuView').render().el\n    @model.get('mapView').$el.append map_menu_node\n\n    @model.trigger 'menu_ready'\n\n    return @\n\n  drawMenuItems: () ->\n    map_menu_view = @model.get 'mapMenuView'\n\n    do map_menu_view.unrenderMenuItems\n    do map_menu_view.renderMenuItems\n\n    return @\n\n  drawCollection: () ->\n    collection_view = @model.get 'markerCollectionView'\n\n    do collection_view.renderCollection\n\n    return @","WikiLocalsModel = new App.Models.WikiLocalsModel()#TODO: needed to check whether there brackets is necessary\nnew App.Views.WikiLocalsView\n  el : $('.content'),\n  model : WikiLocalsModel"],"sourceRoot":"/source/"}